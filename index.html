<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SOHO 온라인 신청서 (서명포함)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <style>
        body { background-color: #f5f5f5; font-family: sans-serif; padding: 10px; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { color: #e6007e; text-align: center; font-weight: bold; margin-bottom: 20px; }
        .section { background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 15px; }
        .label { font-weight: bold; font-size: 0.9rem; color: #333; display: block; margin-bottom: 8px; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; margin-bottom: 10px; font-size: 16px; }
        
        /* 서명 영역 스타일 */
        .signature-wrapper { background: #fff; border: 1px solid #ccc; border-radius: 8px; position: relative; width: 100%; height: 200px; touch-action: none; }
        canvas { width: 100%; height: 100%; cursor: crosshair; }
        .sig-btn-group { text-align: right; margin-top: 5px; }
        .btn-clear { font-size: 0.8rem; padding: 2px 10px; border: 1px solid #ccc; background: #eee; border-radius: 4px; }
        
        .btn-submit { background: #e6007e; color: white; border: none; width: 100%; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>온라인 신청서</h2>
    
    <form id="applyForm">
        <div class="section">
            <span class="label">고객명 (법인명)</span>
            <input type="text" id="userName" placeholder="성함 입력" required>
            
            <span class="label">연락처</span>
            <input type="tel" id="userPhone" placeholder="010-0000-0000" required>
        </div>

        <div class="section">
            <span class="label">해지/신청 내용</span>
            <textarea rows="3" placeholder="내용을 입력해주세요"></textarea>
        </div>

        <div class="section">
            <span class="label">신청인 서명</span>
            <div class="signature-wrapper">
                <canvas id="signature-pad"></canvas>
            </div>
            <div class="sig-btn-group">
                <button type="button" class="btn-clear" id="clear">지우기</button>
            </div>
            <p style="font-size: 0.75rem; color: #999; margin-top: 10px;">
                ※ 위 사각형 안에 손가락이나 펜으로 서명해 주세요.
            </p>
        </div>

        <div class="section" style="font-size: 0.8rem; color: #666;">
            <label><input type="checkbox" style="width: auto; margin-right: 5px;" required> 위 신청 내용을 확인하였으며 서명합니다.</label>
        </div>

        <button type="submit" class="btn-submit">신청 완료</button>
    </form>
</div>

<script>
    // 서명 패드 초기화
    const canvas = document.getElementById('signature-pad');
    const signaturePad = new SignaturePad(canvas, {
        backgroundColor: 'rgb(255, 255, 255)'
    });

    // 화면 크기에 맞게 캔버스 크기 조정
    function resizeCanvas() {
        const ratio = Math.max(window.devicePixelRatio || 1, 1);
        canvas.width = canvas.offsetWidth * ratio;
        canvas.height = canvas.offsetHeight * ratio;
        canvas.getContext("2d").scale(ratio, ratio);
        signaturePad.clear();
    }
    window.onresize = resizeCanvas;
    resizeCanvas();

    // 지우기 버튼 기능
    document.getElementById('clear').addEventListener('click', function () {
        signaturePad.clear();
    });

    // 제출 시 동작
    document.getElementById('applyForm').addEventListener('submit', function (e) {
        e.preventDefault();
        
        if (signaturePad.isEmpty()) {
            alert("서명을 해주세요.");
        } else {
            // 서명 데이터를 이미지(PNG)로 추출
            const signatureData = signaturePad.toDataURL(); 
            console.log("서명 이미지 데이터:", signatureData);
            
            alert("신청서가 성공적으로 작성되었습니다. (테스트 모드)");
        }
    });
</script>

</body>
</html>
